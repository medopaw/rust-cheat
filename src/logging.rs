/*
===============================================================
06. æ—¥å¿—ä¸å¯è§‚æµ‹æ€§ - AI Coding å¿«é€Ÿç†è§£æŒ‡å—
===============================================================

ğŸ¯ ä¸šåŠ¡åœºæ™¯ï¼š
- ç”Ÿäº§ç¯å¢ƒè°ƒè¯•ï¼šå®šä½é—®é¢˜æ ¹æºï¼Œåˆ†æç”¨æˆ·è¡Œä¸º
- æ€§èƒ½ç›‘æ§ï¼šè·Ÿè¸ªè¯·æ±‚è€—æ—¶ï¼Œè¯†åˆ«ç“¶é¢ˆ
- å®¡è®¡æ—¥å¿—ï¼šè®°å½•å…³é”®æ“ä½œï¼Œæ»¡è¶³åˆè§„è¦æ±‚
- åˆ†å¸ƒå¼è¿½è¸ªï¼šè·¨æœåŠ¡çš„è¯·æ±‚é“¾è·¯è¿½è¸ª

ğŸ” 30ç§’è¯†åˆ«æ—¥å¿—æ¨¡å¼ï¼š
- çœ‹åˆå§‹åŒ–ï¼šsubscriber è®¾ç½®ï¼ˆå…¨å±€ä¸€æ¬¡ï¼Œé€šå¸¸åœ¨ main ä¸­ï¼‰
- çœ‹ç»“æ„åŒ–å­—æ®µï¼šinfo!(user_id = 42, "message") è€Œéå­—ç¬¦ä¸²æ‹¼æ¥  
- çœ‹ spanï¼š#[instrument] æˆ–æ‰‹åŠ¨ spanï¼Œè·Ÿè¸ªæ“ä½œèŒƒå›´
- çœ‹æ—¥å¿—çº§åˆ«ï¼štrace/debug/info/warn/error çš„ä½¿ç”¨æ˜¯å¦åˆç†

âš ï¸ AI å¸¸è§æ—¥å¿—é—®é¢˜ï¼š
âŒ ä½¿ç”¨ println! è€Œä¸æ˜¯æ—¥å¿—åº“ï¼ˆæ— æ³•é…ç½®çº§åˆ«å’Œæ ¼å¼ï¼‰
âŒ æ—¥å¿—ä¿¡æ¯ä¸å¤Ÿç»“æ„åŒ–ï¼ˆéš¾ä»¥æŸ¥è¯¢å’Œåˆ†æï¼‰
âŒ è¿‡åº¦æ—¥å¿—ï¼šè®°å½•æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€tokenï¼‰
âŒ ç¼ºå°‘å…³é”®ä¸Šä¸‹æ–‡ï¼šé”™è¯¯æ—¥å¿—æ²¡æœ‰è¶³å¤Ÿçš„å®šä½ä¿¡æ¯
âŒ æ—¥å¿—çº§åˆ«ä½¿ç”¨ä¸å½“ï¼šæŠŠ debug ä¿¡æ¯ç”¨ error è®°å½•

âœ… Review æ¸…å•ï¼š
- [ ] æ˜¯å¦é¿å…è®°å½•æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€API keyï¼‰ï¼Ÿ
- [ ] é”™è¯¯æ—¥å¿—æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Ÿ
- [ ] æ˜¯å¦ä½¿ç”¨äº†åˆé€‚çš„æ—¥å¿—çº§åˆ«ï¼Ÿ
- [ ] ç»“æ„åŒ–å­—æ®µæ˜¯å¦ä¾¿äºæŸ¥è¯¢å’Œè¿‡æ»¤ï¼Ÿ
- [ ] å…³é”®ä¸šåŠ¡æ“ä½œæ˜¯å¦æœ‰é€‚å½“çš„æ—¥å¿—è®°å½•ï¼Ÿ

ğŸ“– é˜…è¯»é¡ºåºï¼š
1. å…ˆçœ‹æ—¥å¿—åˆå§‹åŒ–ï¼ˆsubscriber é…ç½®ï¼Œæ—¥å¿—çº§åˆ«è®¾ç½®ï¼‰
2. å†çœ‹æ—¥å¿—ä½¿ç”¨ï¼ˆevent vs spanï¼Œç»“æ„åŒ–å­—æ®µï¼‰
3. æœ€åçœ‹æ•æ„Ÿä¿¡æ¯å¤„ç†ï¼ˆskip å­—æ®µï¼Œé”™è¯¯ä¿¡æ¯è„±æ•ï¼‰

æ ¸å¿ƒæ—¥å¿—æ¨¡å¼ï¼š

// åˆå§‹åŒ–ï¼ˆmain é‡Œä¸€æ¬¡ï¼‰ï¼š
use tracing::{info, error, instrument};
use tracing_subscriber::FmtSubscriber;

fn init_logs() {
    let sub = FmtSubscriber::builder()
        .with_max_level(tracing::Level::INFO)
        .finish();
    tracing::subscriber::set_global_default(sub).unwrap();
}

// äº‹ä»¶ï¼ˆç»“æ„åŒ–å­—æ®µï¼‰ï¼š
info!(user_id = 42, action = "login", "user action");
error!(error = %e, "db write failed");

// spanï¼ˆèŒƒå›´ + è‡ªåŠ¨è®°å½•è¿›å…¥/é€€å‡º + å‚æ•°ï¼‰ï¼š
#[instrument(skip(secret), fields(req_id = %req_id))]
fn handle(req_id: u64, secret: &str) -> anyhow::Result<()> {
    info!("start");
    Ok(())
}
*/ 

pub fn logging_concepts() {
    println!("æ—¥å¿—ä¸å¯è§‚æµ‹æ€§æ¦‚å¿µï¼š");
    println!("- ç»“æ„åŒ–æ—¥å¿—ï¼šä½¿ç”¨å­—æ®µè€Œéå­—ç¬¦ä¸²æ‹¼æ¥");
    println!("- spanï¼šè·Ÿè¸ªæ“ä½œçš„ç”Ÿå‘½å‘¨æœŸ");
    println!("- instrumentï¼šè‡ªåŠ¨ä¸ºå‡½æ•°æ·»åŠ  span");
    println!("- æ—¥å¿—çº§åˆ«ï¼štrace, debug, info, warn, error");
}

pub fn demonstrate_logging_patterns() {
    println!("æ—¥å¿—æ¨¡å¼æ¼”ç¤ºï¼š");
    println!("1. åˆå§‹åŒ–è®¢é˜…è€…ï¼ˆå…¨å±€ä¸€æ¬¡ï¼‰");
    println!("2. è®°å½•ç»“æ„åŒ–äº‹ä»¶");
    println!("3. ä½¿ç”¨ span è·Ÿè¸ªæ“ä½œèŒƒå›´");
    println!("4. instrument å®è‡ªåŠ¨åŒ–");
}