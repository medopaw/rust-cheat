/*

# 06. æ—¥å¿—ä¸å¯è§‚æµ‹æ€§ - AI Coding å¿«é€Ÿç†è§£æŒ‡å—

---

## ğŸ¯ ä¸šåŠ¡åœºæ™¯å¯¹ç…§è¡¨

| ç±»å‹ | ç”¨é€” | å…¸å‹ç¤ºä¾‹ |
|------|------|----------|
| `info!` | ä¸šåŠ¡æµç¨‹è®°å½• | ç”¨æˆ·ç™»å½•ã€API è°ƒç”¨ |
| `warn!` | éè‡´å‘½é—®é¢˜ | é…ç½®ç¼ºå¤±ã€æ€§èƒ½è­¦å‘Š |
| `error!` | å¿…é¡»å…³æ³¨çš„é”™è¯¯ | æ•°æ®åº“å¤±è¿ã€API å¤±è´¥ |
| `#[instrument]` | è·Ÿè¸ªå‡½æ•°æ‰§è¡ŒèŒƒå›´ | åˆ†å¸ƒå¼è¿½è¸ªã€æ€§èƒ½ç›‘æ§ |

## ğŸ” 30ç§’è¯†åˆ«è¦ç‚¹

**å¿«é€Ÿåˆ¤æ–­æ–¹æ³•ï¼š**

- ğŸ‘€ **çœ‹åˆå§‹åŒ–**: subscriber è®¾ç½®ï¼ˆå…¨å±€ä¸€æ¬¡ï¼Œé€šå¸¸åœ¨ main ä¸­ï¼‰
- ğŸ”§ **çœ‹ç»“æ„åŒ–**: `info!(user_id = 42, "message")` è€Œéå­—ç¬¦ä¸²æ‹¼æ¥  
- âš ï¸ **çœ‹ span ä½¿ç”¨**: `#[instrument]` æˆ–æ‰‹åŠ¨ spanï¼Œè·Ÿè¸ªæ“ä½œèŒƒå›´

## âš ï¸ AI å¸¸è§é—®é¢˜è­¦å‘Š

> **å±é™©ä¿¡å·** ğŸš¨

- ğŸ”´ **æ»¥ç”¨ println!** ä½¿ç”¨ `println!` è€Œä¸æ˜¯æ—¥å¿—åº“ï¼ˆæ— æ³•é…ç½®çº§åˆ«å’Œæ ¼å¼ï¼‰
- ğŸ”´ **ç»“æ„ä¸åˆç†** æ—¥å¿—ä¿¡æ¯ä¸å¤Ÿç»“æ„åŒ–ï¼ˆéš¾ä»¥æŸ¥è¯¢å’Œåˆ†æï¼‰  
- ğŸ”´ **æ³„æ¼æ•æ„Ÿä¿¡æ¯** è®°å½•æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€tokenï¼‰
- ğŸ”´ **ä¸Šä¸‹æ–‡ä¸è¶³** é”™è¯¯æ—¥å¿—æ²¡æœ‰è¶³å¤Ÿçš„å®šä½ä¿¡æ¯

## âœ… Code Review æ£€æŸ¥æ¸…å•

â˜ æ˜¯å¦é¿å…è®°å½•æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€API keyï¼‰ï¼Ÿ  
â˜ é”™è¯¯æ—¥å¿—æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Ÿ  
â˜ æ˜¯å¦ä½¿ç”¨äº†åˆé€‚çš„æ—¥å¿—çº§åˆ«ï¼Ÿ  
â˜ ç»“æ„åŒ–å­—æ®µæ˜¯å¦ä¾¿äºæŸ¥è¯¢å’Œè¿‡æ»¤ï¼Ÿ  
â˜ å…³é”®ä¸šåŠ¡æ“ä½œæ˜¯å¦æœ‰é€‚å½“çš„æ—¥å¿—è®°å½•ï¼Ÿ

## ğŸ“– æ¨èé˜…è¯»é¡ºåº

**Step 1: æ—¥å¿—åˆå§‹åŒ–æ£€æŸ¥**  
å…ˆçœ‹ main å‡½æ•°ä¸­çš„ subscriber è®¾ç½®

**Step 2: ç»“æ„åŒ–æ—¥å¿—åˆ†æ**  
å†çœ‹æ—¥å¿—è°ƒç”¨æ˜¯å¦ä½¿ç”¨äº†ç»“æ„åŒ–å­—æ®µ

**Step 3: æ•æ„Ÿä¿¡æ¯æ’æŸ¥**  
æœ€åçœ‹æ˜¯å¦æœ‰æ•æ„Ÿä¿¡æ¯æ³„æ¼é£é™©

---

> ğŸ’¡ **è®°ä½**: å¥½çš„æ—¥å¿—æ˜¯ç”Ÿäº§ç¯å¢ƒè°ƒè¯•çš„ç”Ÿå‘½çº¿ï¼

ğŸ“– é˜…è¯»é¡ºåºï¼š
1. å…ˆçœ‹æ—¥å¿—åˆå§‹åŒ–ï¼ˆsubscriber é…ç½®ï¼Œæ—¥å¿—çº§åˆ«è®¾ç½®ï¼‰
2. å†çœ‹æ—¥å¿—ä½¿ç”¨ï¼ˆevent vs spanï¼Œç»“æ„åŒ–å­—æ®µï¼‰
3. æœ€åçœ‹æ•æ„Ÿä¿¡æ¯å¤„ç†ï¼ˆskip å­—æ®µï¼Œé”™è¯¯ä¿¡æ¯è„±æ•ï¼‰

æ ¸å¿ƒæ—¥å¿—æ¨¡å¼ï¼š

```rust
// åˆå§‹åŒ–ï¼ˆmain é‡Œä¸€æ¬¡ï¼‰ï¼š
use tracing::{info, error, instrument};
use tracing_subscriber::FmtSubscriber;

fn init_logs() {
    let sub = FmtSubscriber::builder()
        .with_max_level(tracing::Level::INFO)
        .finish();
    tracing::subscriber::set_global_default(sub).unwrap();
}

// äº‹ä»¶ï¼ˆç»“æ„åŒ–å­—æ®µï¼‰ï¼š
info!(user_id = 42, action = "login", "user action");
error!(error = %e, "db write failed");

// spanï¼ˆèŒƒå›´ + è‡ªåŠ¨è®°å½•è¿›å…¥/é€€å‡º + å‚æ•°ï¼‰ï¼š
#[instrument(skip(secret), fields(req_id = %req_id))]
fn handle(req_id: u64, secret: &str) -> anyhow::Result<()> {
    info!("start");
    Ok(())
}
```

*/ 

pub fn logging_concepts() {
    println!("æ—¥å¿—ä¸å¯è§‚æµ‹æ€§æ¦‚å¿µï¼š");
    println!("- ç»“æ„åŒ–æ—¥å¿—ï¼šä½¿ç”¨å­—æ®µè€Œéå­—ç¬¦ä¸²æ‹¼æ¥");
    println!("- spanï¼šè·Ÿè¸ªæ“ä½œçš„ç”Ÿå‘½å‘¨æœŸ");
    println!("- instrumentï¼šè‡ªåŠ¨ä¸ºå‡½æ•°æ·»åŠ  span");
    println!("- æ—¥å¿—çº§åˆ«ï¼štrace, debug, info, warn, error");
}

pub fn demonstrate_logging_patterns() {
    println!("æ—¥å¿—æ¨¡å¼æ¼”ç¤ºï¼š");
    println!("1. åˆå§‹åŒ–è®¢é˜…è€…ï¼ˆå…¨å±€ä¸€æ¬¡ï¼‰");
    println!("2. è®°å½•ç»“æ„åŒ–äº‹ä»¶");
    println!("3. ä½¿ç”¨ span è·Ÿè¸ªæ“ä½œèŒƒå›´");
    println!("4. instrument å®è‡ªåŠ¨åŒ–");
}